---
title: Шаг 3 - Геокодирование
linktitle: Шаг 3 - Геокодирование
toc: true
type: docs
date: "2019-11-07T00:00:00Z"
draft: false
menu:
  import-data:
    parent: AMRcloud. Импорт данных
    weight: 6

weight: 6
---

## Общая информация

Важный этап для создания основы, с помощью которой <span style="color:#2BA2E6">**AMRcloud**</span> строит различные карты, проставляя метки географических объектов - геокодирование.

Географические объекты, которые можно использовать в <span style="color:#2BA2E6">**AMRcloud**</span> находятся в широком диапозоне от области, города до отдельных корпусов ЛПУ.

Для запуска процесса геокодирования необходимо нажать кнопку **1.Геокодировать**

{{< figure library="true" title="Геокодирование. Структура первого подпункта" src="tutorials/import-data/geoc_1.png"  numbered="true" lightbox="true" >}}

Предварительно просматривая карту, пользователь для каждого географического объекта может получить Широту и Долготу - расположение внизу экрана.

Ручной поиск географических объектов доступен двумя способами:

1. Введение адреса в строке поиска
2. С помощью приближения карты 

{{< figure library="true" title="Структурные элементы - Карта:предпросмотр" src="tutorials/import-data/geoc_2.png"  numbered="true" lightbox="true" >}}

Данные по геокодированию можно скорректировать. 
Для этого нажать на необходимую ячейку, при этом данные можно ввести, выбрав подходящие объекты на карте и скопировать показатели Широты и Долготы.

{{< figure library="true" title="Коррекция данных в ячейках" src="tutorials/import-data/geoc_3.png"  numbered="true" lightbox="true" >}}

Если все данные по географическим объектам правильные, следует переходить к следующему этапу  **ШАГ 4**, нажав кнопку **Сохранить шаг 3**.

## Практические ситуации

При работе с геокодированием могут возникнуть ситуации, которые потребуют от пользователя ручного ввода более подробной информации или исправления географических координат, которые система не идентифицировала.

Рассмотрим несколько практических ситуаций.


### Ситуация 1. <span style="color:#2BA2E6">**AMRcloud**</span> не распознал географический объект.

**1.Проверить правильность названия географического объекта.**

|    Неправильное название                        |         Решение                                                                                                                                     |
|:------------------------------------------------|:---------------------------------------------                                                                                                       |
|**Для нескольких географических объектов**       | **Основной вариант**: исправить данные в исходной таблице **&rarr;** сбросить предыдущие Шаги (1-2) **&rarr;** загрузить исправленный вариант       |
|**Для 1-2 географических объектов**              |**Основной вариант**: исправить данные в исходной таблице **&rarr;**  сбросить предыдущие Шаги (1-2) **&rarr;** загрузить исправленный вариант **Альтернативный вариант**: вручную ввести Широту, Долготу **&rarr;** Нажать оранжевую кнопку **2.Применить исправления**            

**2.Ручная корректировка географических объектов.**

Ручная корректировка позволяет быстро уточнить географические координаты.

{{% alert warning %}}

Важно!

Ручное исправление система учитывает отдельно от автоматического этапа геокодирования, поэтому при ручной корректировке рекомендуется устанавливать Широту и Долготу по более подробным данным, например, конкретный корпус ЛПУ.

{{% /alert %}}        

Если пользователь знает координаты ненайденного географического объекта, то их можно ввести в таблицу, нажав двойным щелчком мыши по необходимой ячейке. В случаях, когда географические координаты неизвестны, можно воспользоваться разделом *Карта: предпросмотр* - подробно  Ситуация 2 (см. ниже).                

{{< figure library="true" title="Коррекция ненайденных данных" src="tutorials/import-data/geoc_change.png"  numbered="true" lightbox="true" >}}


### Ситуация 2. Требуется скорректировать геокоординаты.

Данная ситуация может возникнуть, если система автоматически не нашла объекты на карте и/или требуется более точные координаты. Например, в рамках одного города - разные ЛПУ или разные корпуса одного лечебного учреждения.

Рассмотрим пример. Представим ситуцию, когда пользователь работает с данными, полученными в городе Смоленске из нескольких ЛПУ.

Предположим, что один из объектов - СОДКБ (Смоленская областная детская клиническая больница).

Алгоритм работы:

1. После нажатия кнопки **1. Геокодирование** и получения <span style="color:#73A839">**зеленой таблицы**</span> с валидированными данными **&rarr;** просмотреть таблицу и найти ячейки, которые требуют корректировки.
2. Просмотреть географические объекты в разделе *Карта: предпросмотр*

{{% alert note %}}

На заметку!

- Если на этапе **ШАГ 2** рядом с вопросом *Содержит ли набор данных координаты широты и долготы?*, была поставлена отметка, т.е. система использовала данные пользователя, рекомендуется использовать исходную таблицу для контроля внесения исправлений.
- Если пользователь неуверен в точности данных по Широте и Долготе, рекомендуется не включать пользовательские данные, т.е. не ставить отметку рядом с вопросом *Содержит ли набор данных координаты широты и долготы?* 
 
{{% /alert %}}

В нашем примере, пользовательские данные содержали неточность в геокординатах, после просмотра исходной таблицы. 
 
Как внести исправления? Доступно два варианта:
 
1. Воспользоваться поиском. Внести адрес или названия объекта **&rarr;** выбрать из списка подходящий вариант **&rarr;** получить внизу экрана координаты **&rarr;** обвести их с помощью мыши - левая кнопка **&rarr;** скопировать, нажав правую кнопку мыши **&rarr;** двойной щелчок по ячейке в нужной таблице (<span style="color:#73A839">**зеленой**</span> или <span style="color:#FEAB3A">**оранжевой**</span>)

{{< figure library="true" title="Исправление с использованием строки поиска" src="tutorials/import-data/geoc_search.png"  numbered="true" lightbox="true" >}}

2. Приблизить карту **&rarr;** нажать левую кнопку мыши по конкретному географическому объекту **&rarr;** получить внизу экрана координаты **&rarr;** обвести их с помощью мыши - левая кнопка **&rarr;** скопировать, нажав правую кнопку мыши **&rarr;** двойной щелчок по ячейке в нужной таблице (<span style="color:#73A839">**зеленой**</span> или <span style="color:#FEAB3A">**оранжевой**</span>)

{{< figure library="true" title="Исправление с использованием приближения карты" src="tutorials/import-data/geoc_search2.png"  numbered="true" lightbox="true" >}}

{{% alert note %}}

На заметку!

Если значение Широты или Долготы скопированы в неправильную ячейку и курсор мыши находится в данной ячейке, первичный вариант можно вернуть, нажав на клавиатуре клавиши *Ctrl*+*Z*.
 
{{% /alert %}}

После внесения необходимых исправлений в <span style="color:#FEAB3A">**оранжевую**</span> таблицу необходимо нажать кнопку **2. Применить исправления**, затем
нажать кнопку **3. Сохранить шаг 3**

{{< figure library="true" src="tutorials/import-data/save_step3.png" >}}

{{% alert warning %}}

Важно!

При нажатии кнопки **3. Сохранить шаг 3** может появиться предупреждающая надпись **Существует несколько вариантов координат для одной и той же точки**.

{{% /alert %}}

{{< figure library="true" title="Оповещение по нескольким координатам для одной точки" src="tutorials/import-data/alarm.png"  numbered="true" lightbox="true" >}}

Варианты решения - выбор **Точного географического объекта**. 

|Ситуация| Решение|
|:---|:---|
|**Точный географический объект**|Вернуться на **ШАГ 2**  и сбросить его **&rarr;**  заново все заполнить и в пункте **Выберите столбец, содержащий названия географических объектов**  выбрать "точный" географический объект|
|**Точный географический объект выбран** |Скорректировать координаты см. Ситуации 1-3|
|**Точного географического объекта нет**|Вернуться на **ШАГ 2**  и сбросить его **&rarr;**  заново все заполнить **&rarr;**  не ставить отметку возле вопроса * Содержит ли набор данных координаты широты и долготы?*|

Точный географический объект - это более подробное географическое описание в сравнении с текущим вариантом. Например, был выбран город или область, то точным вариантом может быть конкретный корпус ЛПУ.


### Ситуация 3. Локальные географические данные.

Рассмотрим вариант, когда пользователю необходимо проставить географические координаты в рамках одного ЛПУ.

Предположим, что необходимо расставить географические координаты для 1,2,3 корпусов Смоленской областной клинической больницы.

Алгоритм работы:

1. Нажмем кнопку **1. Геокодировать**
2. Откроем окно *Карта: предпросмотр*
3. Нажмем на строку поиска и напечатаем нужное ЛПУ.
В примере это - Смоленская областная клиническая больница (печатать полностью, не сокращать до СОКБ)
4. Выберем из списка необходимый географический объект
5. Поочередно нажимая на необходимые корпуса больниц, получим географические координаты
6. Последовательно скопируем географические координаты для каждого корпуса и вставим их в соответствующую ячейку таблицы
{{< figure library="true" title="Алгоритм работы с локальными данными" src="tutorials/import-data/built.png"  numbered="true" lightbox="true" >}}
7. Нажать кнопку **2.Применить исправления** и проверить результаты.
8. Перейти на следующий этап, нажав кнопку **3. Сохранить шаг 3**
{{< figure library="true" title="Контроль и сохранение проставленных координат" src="tutorials/import-data/built_save.png"  numbered="true" lightbox="true" >}}